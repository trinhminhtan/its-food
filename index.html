<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒê·∫∑t M√≥n Tr∆∞a - IT Strategy, Chingluh Group</title>
    <meta name="description" content="ƒê·∫∑t m√≥n tr∆∞a tr·ª±c tuy·∫øn nhanh ch√≥ng v√† ti·ªán l·ª£i cho nh√≥m IT Strategy (ITS) t·∫°i Chingluh. Th·ª±c ƒë∆°n phong ph√∫, m√≥n ƒÉn ch·∫•t l∆∞·ª£ng, giao h√†ng t·∫≠n n∆°i trong n·ªôi b·ªô c√¥ng ty. ƒê·∫∑t ngay!">
    <meta name="keywords" content="ƒë·∫∑t m√≥n tr∆∞a, c∆°m tr∆∞a n·ªôi b·ªô, ITS, IT Strategy, Chingluh, c∆°m tr∆∞a vƒÉn ph√≤ng, ƒë·∫∑t c∆°m online, th·ª±c ƒë∆°n c∆°m tr∆∞a, nh√≥m IT, giao ƒë·ªì ƒÉn">
    <meta name="author" content="IT Strategy, Chingluh Group">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="ƒê·∫∑t M√≥n Tr∆∞a Online - D√†nh cho Nh√≥m ITS, Chingluh">
    <meta property="og:description" content="ƒê·∫∑t m√≥n tr∆∞a tr·ª±c tuy·∫øn nhanh ch√≥ng, ti·ªán l·ª£i cho nh√≥m IT Strategy. Th·ª±c ƒë∆°n ƒëa d·∫°ng, giao h√†ng n·ªôi b·ªô!">
    <meta property="og:image" content="public/theme.jpeg">
    <meta property="og:url" content="#">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="ƒê·∫∑t M√≥n Tr∆∞a N·ªôi B·ªô ITS">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ƒê·∫∑t M√≥n Tr∆∞a Online - D√†nh cho Nh√≥m ITS, Chingluh">
    <meta name="twitter:description" content="ƒê·∫∑t m√≥n tr∆∞a tr·ª±c tuy·∫øn nhanh ch√≥ng, ti·ªán l·ª£i cho nh√≥m IT Strategy. Th·ª±c ƒë∆°n ƒëa d·∫°ng, giao h√†ng n·ªôi b·ªô!">
    <meta name="twitter:image" content="public/theme.jpeg">
    <meta name="twitter:site" content="#">
    <link rel="canonical" href="#" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
      /* Th√™m m·ªôt s·ªë custom styles (ngo√†i Tailwind) */
      body {
        font-family: 'Noto Sans TC', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        /* ∆Øu ti√™n font ƒê√†i Loan */
        background-color: #f2f2f2;
        /* M√†u n·ªÅn x√°m nh·∫°t */
      }

      .food-section.inactive {
        opacity: 0.7;
        pointer-events: none;
      }

      .toggle-button {
        cursor: pointer;
        transition: all 0.3s ease;
        /* Hi·ªáu ·ª©ng m∆∞·ª£t m√† */
      }

      .toggle-button:hover {
        transform: translateY(-2px);
        /* Hi·ªáu ·ª©ng "n·ªïi" */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        /* B√≥ng ƒë·ªï nh·∫π */
      }

      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      input[type="number"] {
        -moz-appearance: textfield;
        /* Firefox */
      }

      #countdown {
        font-variant-numeric: tabular-nums;
        font-family: 'Roboto Mono', monospace;
        /* Font monospace cho ƒë·ªìng h·ªì */
        color: #333;
        /* M√†u t·ªëi h∆°n */
      }

      .order-table th,
      .order-table td {
        @apply px-4 py-3 border border-gray-300;
        /* TƒÉng padding, vi·ªÅn ƒë·∫≠m h∆°n */
        font-size: 0.9rem;
        /* Ch·ªØ nh·ªè h∆°n m·ªôt ch√∫t */
      }

      .order-table thead {
        background-color: #e0e7ff;
        /* M√†u t√≠m nh·∫°t cho header */
        color: #312e81;
        /* Ch·ªØ m√†u t√≠m ƒë·∫≠m */
        font-weight: 500;
        /* Ch·ªØ ƒë·∫≠m v·ª´a ph·∫£i */
      }

      .hidden {
        display: none !important;
      }

      /* Style cho n√∫t chuy·ªÉn ng√¥n ng·ªØ */
      .lang-switcher {
        position: fixed;
        top: 1.5rem;
        right: 1.5rem;
        z-index: 1000;
        display: flex;
        gap: 0.75rem;
      }

      /* N√∫t ch·ªçn ng√¥n ng·ªØ */
      .lang-button {
        background-color: #fff;
        border: 2px solid transparent;
        padding: 0;
        cursor: pointer;
        border-radius: 10px;
        transition: all 0.3s ease;
        width: 48px;
        height: 32px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transform: scale(1);
      }

      /* ·∫¢nh l√° c·ªù */
      .lang-button img {
        max-width: 100%;
        max-height: 100%;
        display: block;
        border-radius: 5px;
      }

      /* Khi ƒë∆∞·ª£c ch·ªçn */
      .lang-button.active {
        border-color: #4c6ef5;
        background-color: #e0e7ff;
        box-shadow: 0 6px 12px rgba(76, 110, 245, 0.3);
      }

      /* Hover */
      .lang-button:hover {
        background-color: #f8f9ff;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        transform: scale(1.1);
      }

      /* Form elements */
      input[type="text"],
      input[type="number"],
      select {
        border-radius: 6px;
        /* Bo tr√≤n nhi·ªÅu h∆°n */
        border: 1px solid #ced4da;
        /* Vi·ªÅn x√°m chu·∫©n */
        padding: 0.6rem 0.8rem;
        /* Padding l·ªõn h∆°n */
        transition: all 0.2s ease;
        font-size: 0.9rem;
        /* Ch·ªØ nh·ªè h∆°n */
        background-color: #fff;
        /* N·ªÅn tr·∫Øng */
      }

      input[type="text"]:focus,
      input[type="number"]:focus,
      select:focus {
        border-color: #4c6ef5;
        /* Focus m√†u t√≠m */
        box-shadow: 0 0 0 3px rgba(76, 110, 245, 0.25);
        /* Glow t√≠m */
        outline: none;
        /* B·ªè outline m·∫∑c ƒë·ªãnh */
      }

      /* N√∫t G·ª≠i */
      button[type="submit"] {
        background-color: #4c6ef5;
        /* M√†u t√≠m ch·ªß ƒë·∫°o */
        border-radius: 10px;
        /* Bo tr√≤n nhi·ªÅu */
        padding: 0.75rem 1.5rem;
        /* Padding l·ªõn h∆°n */
        font-size: 1rem;
        /* Ch·ªØ to h∆°n */
      }

      button[type="submit"]:hover {
        background-color: #364fc7;
      }

      /* N√∫t Xu·∫•t Excel */
      #exportExcel {
        background-color: #2f855a;
        /* Xanh l√° ƒë·∫≠m */
        border-radius: 10px;
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
      }

      #exportExcel:hover {
        background-color: #256947;
      }

      /* Ti√™u ƒë·ªÅ */
      h1,
      h2 {
        font-weight: 600;
        /* ƒê·∫≠m h∆°n */
      }

      h1 {
        color: #364fc7;
        /* T√≠m ƒë·∫≠m */
        margin-bottom: 1.5rem;
        /* Margin l·ªõn h∆°n */
      }

      /* Loading Spinner */
      #loadingSpinner {
        background-color: rgba(255, 255, 255, 0.8);
        /* N·ªÅn tr·∫Øng ƒë·ª•c */
      }

      #loadingSpinner .animate-spin {
        border-top-color: #4c6ef5;
        /* Spinner m√†u t√≠m */
        border-left-color: #4c6ef5;
      }

      #loadingSpinner span {
        font-family: 'Roboto Mono', monospace;
        color: #4c6ef5;
      }
    </style>
  </head>
  <body class="bg-gradient-to-br from-blue-50 to-teal-100 p-4 md:p-6">
    <div class="lang-switcher">
      <button class="lang-button active" data-lang="vi" title="Ti·∫øng Vi·ªát" aria-label="Chuy·ªÉn sang ti·∫øng Vi·ªát">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Flag_of_Vietnam.svg/2560px-Flag_of_Vietnam.svg.png" alt="C·ªù Vi·ªát Nam">
      </button>
      <button class="lang-button" data-lang="zh-TW" title="ÁπÅÈ´î‰∏≠Êñá" aria-label="ÂàáÊèõÂà∞ÁπÅÈ´î‰∏≠Êñá">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Flag_of_the_Republic_of_China.svg/2560px-Flag_of_the_Republic_of_China.svg.png" alt="C·ªù ƒê√†i Loan">
      </button>
    </div>
    <div class="max-w-4xl mx-auto bg-white rounded-3xl shadow-xl p-6 md:p-10">
      <div id="loadingSpinner" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 z-50 flex items-center justify-center">
        <div class="animate-spin rounded-full h-20 w-20 border-t-4 border-b-4 border-blue-500"></div>
        <span class="ml-3 text-white text-lg font-semibold" data-translate="loading">ƒêang t·∫£i...</span>
      </div>
      <h1 class="relative text-4xl md:text-5xl font-bold text-white p-10 md:p-16 bg-cover bg-center rounded-2xl shadow-2xl" style="background-image: url('public/theme.jpeg'); width: 100%; min-height: 300px; position: relative;">
        <div class="absolute inset-0 bg-black bg-opacity-40 rounded-2xl"></div>
        <span class="absolute bottom-0 right-0 z-10 bg-black bg-opacity-60 px-6 py-2 rounded-lg text-5xl md:text-5xl m-2"> ƒê·∫∑t M√≥n Tr∆∞a </span>
      </h1>
      <p id="countdown" class="text-center text-2xl md:text-3xl text-red-600 font-semibold mb-6 md:mb-10 pt-4"></p>
      <form id="orderForm" class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="md:col-span-1">
          <h2 class="text-2xl font-semibold text-blue-700 text-center border-b border-blue-300 pb-2 mb-4">
            <i class="fas fa-user mr-1"></i>
            <span data-translate="yourName">T√™n C·ªßa B·∫°n</span>
          </h2>
          <div>
            <label for="name" class="sr-only">T√™n c·ªßa b·∫°n:</label>
            <input id="name" type="text" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n" class="w-full px-4 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
          </div>
        </div>
        <div class="md:col-span-1">
          <h2 class="text-2xl font-semibold text-blue-700 text-center border-b border-blue-300 pb-2 mb-4">
            <i class="fas fa-coffee mr-1"></i>
            <span data-translate="drinks">Th·ª©c U·ªëng</span>
          </h2>
          <div>
            <label for="drink" class="sr-only">Ch·ªçn th·ª©c u·ªëng:</label>
            <input id="drink" type="text" list="drinkOptions" data-translate="drinkPlaceholder" placeholder="Ch·ªçn th·ª©c u·ªëng" class="w-full px-4 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
            <datalist id="drinkOptions"></datalist>
          </div>
          <div class="mt-4">
            <label for="quantity" class="sr-only">S·ªë l∆∞·ª£ng ƒë·ªì u·ªëng:</label>
            <input id="quantity" type="number" data-translate="quantityPlaceholder" placeholder="S·ªë l∆∞·ª£ng" class="w-full px-4 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required min="1" value="1">
          </div>
          <div class="mt-4">
            <label for="size" class="sr-only">K√≠ch c·ª°:</label>
            <select id="size" class="w-full px-4 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700">
              <option value="Nh·ªè" data-translate="small">Nh·ªè</option>
              <option value="V·ª´a" data-translate="medium">V·ª´a</option>
              <option value="L·ªõn" data-translate="large">L·ªõn</option>
            </select>
          </div>
        </div>
        <div class="md:col-span-1 food-section active">
          <h2 class="text-2xl font-semibold text-center text-gray-600 border-b border-gray-300 pb-2 mb-4 flex items-center justify-center gap-3 toggle-button">
            <span id="foodSectionTitle">
              <i class="fas fa-hamburger mr-1"></i>
              <span data-translate="foodOptional">ƒê·ªì ƒÇn (T√πy ch·ªçn)</span>
            </span>
            <i id="foodToggleIcon" class="fas fa-chevron-down text-lg"></i>
          </h2>
          <div>
            <label for="food" class="sr-only">M√≥n ƒÉn:</label>
            <input id="food" type="text" data-translate="foodPlaceholder" placeholder="Nh·∫≠p m√≥n ƒÉn (n·∫øu c√≥)" class="w-full px-4 py-3 border border-gray-300 rounded-2xl bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
          </div>
        </div>
        <div class="md:col-span-3 flex justify-center">
          <label for="extra" class="relative inline-flex items-center cursor-pointer">
            <input type="checkbox" id="extra" class="sr-only peer">
            <div class="w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300  rounded-full peer  peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all  peer-checked:bg-blue-600"></div>
            <span class="ms-3 text-lg font-medium text-gray-900" data-translate="extraOption">L·∫•y t·∫©y ƒë√°</span>
          </label>
        </div>
        <div class="md:col-span-3">
          <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-full focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-opacity-50 transition-all duration-200 ease-in-out">
            <i class="fas fa-paper-plane mr-2"></i>
            <span data-translate="submitButton">G·ª≠i ƒê∆°n H√†ng</span>
          </button>
        </div>
      </form>
      <div class="mt-10 md:mt-16">
        <h2 class="text-2xl font-semibold mb-4 text-center text-green-700 border-b border-green-300 pb-2 flex items-center justify-center gap-2">
          <i class="fas fa-list-ul"></i>
          <span data-translate="orderListTitle">Danh S√°ch ƒê∆°n H√†ng</span>
        </h2>
        <div class="overflow-x-auto rounded-xl shadow-md">
          <table class="w-full border-collapse text-center order-table">
            <thead class="bg-green-100">
              <tr>
                <th data-translate="nameHeader">T√™n</th>
                <th data-translate="drinkHeader">Th·ª©c u·ªëng</th>
                <th data-translate="foodHeader">M√≥n ƒÉn</th>
                <th data-translate="quantityHeader">S·ªë l∆∞·ª£ng ƒë·ªì u·ªëng</th>
                <th data-translate="sizeHeader">Size</th>
                <th data-translate="extraHeader">T·∫©y ƒê√°</th>
              </tr>
            </thead>
            <tbody id="orderList"></tbody>
          </table>
        </div>
        <button id="exportExcel" class="mt-6 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-full w-full focus:outline-none focus:ring-4 focus:ring-green-300 focus:ring-opacity-50 transition-all duration-200 ease-in-out">
          <i class="fas fa-file-excel mr-2"></i>
          <span data-translate="exportButton">Xu·∫•t Excel</span>
        </button>
      </div>
      <div class="mt-10 md:mt-16">
        <h2 class="text-2xl font-semibold mb-4 text-center text-purple-700 border-b border-purple-300 pb-2 flex items-center justify-center gap-2">
          <i class="fas fa-chart-bar"></i>
          <span data-translate="summaryTitle">Th·ªëng K√™</span>
        </h2>
        <ul id="summaryList" class="list-disc list-inside"></ul>
      </div>
    </div>
    <script>
      const API_URL = "https://r2bucket.wmtan.workers.dev/api/orders"; // Thay b·∫±ng URL c·ªßa b·∫°n
      // ƒê·ªëi t∆∞·ª£ng ch·ª©a c√°c chu·ªói ng√¥n ng·ªØ
      const translations = {
        vi: {
          pageTitle: "ƒê·∫∑t M√≥n Tr∆∞a",
          yourName: "T√™n C·ªßa B·∫°n",
          drinks: "Th·ª©c U·ªëng",
          drinkPlaceholder: "Ch·ªçn th·ª©c u·ªëng",
          quantityPlaceholder: "S·ªë l∆∞·ª£ng ƒë·ªì u·ªëng",
          small: "Nh·ªè",
          medium: "V·ª´a",
          large: "L·ªõn",
          foodOptional: "ƒê·ªì ƒÇn (T√πy ch·ªçn)",
          foodPlaceholder: "Nh·∫≠p m√≥n ƒÉn (n·∫øu c√≥)",
          extraOption: "L·∫•y t·∫©y ƒë√°",
          submitButton: "G·ª≠i ƒê∆°n H√†ng",
          orderListTitle: "Danh S√°ch ƒê∆°n H√†ng",
          nameHeader: "T√™n",
          drinkHeader: "Th·ª©c u·ªëng",
          foodHeader: "M√≥n ƒÉn",
          quantityHeader: "S·ªë l∆∞·ª£ng ƒë·ªì u·ªëng",
          sizeHeader: "Size",
          extraHeader: "T·∫©y ƒê√°",
          exportButton: "Xu·∫•t Excel",
          summaryTitle: "Th·ªëng K√™",
          loading: "ƒêang t·∫£i...",
          duplicateName: 'Tr√πng t√™n!',
          duplicateMessage: 'B·∫°n ƒë√£ ƒë·∫∑t ƒë∆°n v·ªõi t√™n "{name}" r·ªìi. B·∫°n c√≥ mu·ªën ghi ƒë√® ƒë∆°n h√†ng c≈© kh√¥ng?',
          confirmOverride: 'C√≥, ghi ƒë√®',
          denyOverride: 'Kh√¥ng',
          orderSuccess: 'ƒê√£ ƒë·∫∑t h√†ng th√†nh c√¥ng!',
          errorTitle: "L·ªói!",
          enterName: "Vui l√≤ng nh·∫≠p t√™n",
          selectDrink: "Vui l√≤ng ch·ªçn th·ª©c u·ªëng",
          quantityError: "S·ªë l∆∞·ª£ng ph·∫£i l√† s·ªë v√† l·ªõn h∆°n 0",
          loadOrderError: "L·ªói t·∫£i ƒë∆°n h√†ng",
          loadSummaryError: "L·ªói t·∫£i th·ªëng k√™",
          exportError: "L·ªói xu·∫•t Excel",
          connectionError: "L·ªói k·∫øt n·ªëi",
          checkNameError: "L·ªói ki·ªÉm tra tr√πng t√™n",
          orderError: "C√≥ l·ªói x·∫£y ra",
          drinkOptions: ["Tr√† s·ªØa", "C√† ph√™ ƒëen", "C√† ph√™ s·ªØa", "N∆∞·ªõc cam", "N∆∞·ªõc l·ªçc", "Tr√† ƒê√†o", "Tr√† V·∫£i", "Sinh t·ªë"]
        },
        "zh-TW": {
          pageTitle: "Ë®ÇÂçàÈ§ê",
          yourName: "ÊÇ®ÁöÑÂßìÂêç",
          drinks: "È£≤Êñô",
          drinkPlaceholder: "ÈÅ∏ÊìáÈ£≤Êñô",
          quantityPlaceholder: "Êï∏Èáè",
          small: "Â∞è",
          medium: "‰∏≠",
          large: "Â§ß",
          foodOptional: "È£üÁâ© (ÂèØÈÅ∏)",
          foodPlaceholder: "Ëº∏ÂÖ•È£üÁâ© (Â¶ÇÊûúÊúâÁöÑË©±)",
          extraOption: "Âä†ÂÜ∞Â°ä",
          submitButton: "ÈÄÅÂá∫Ë®ÇÂñÆ",
          orderListTitle: "Ë®ÇÂñÆÂàóË°®",
          nameHeader: "ÂßìÂêç",
          drinkHeader: "È£≤Êñô",
          foodHeader: "È£üÁâ©",
          quantityHeader: "Êï∏Èáè",
          sizeHeader: "Â§ßÂ∞è",
          extraHeader: "ÂéªÂÜ∞",
          exportButton: "ÂåØÂá∫ Excel",
          summaryTitle: "Áµ±Ë®à",
          loading: "ËºâÂÖ•‰∏≠...",
          duplicateName: 'ÂßìÂêçÈáçË§áÔºÅ',
          duplicateMessage: 'ÊÇ®Â∑≤Á∂ìÁî® "{name}" ÈÄôÂÄãÂêçÂ≠óÈÄÅÂá∫Ë®ÇÂñÆ„ÄÇÊÇ®Á¢∫ÂÆöË¶ÅË¶ÜËìã‰πãÂâçÁöÑË®ÇÂñÆÂóéÔºü',
          confirmOverride: 'ÊòØÔºåË¶ÜËìã',
          denyOverride: 'Âê¶',
          orderSuccess: 'Ë®ÇÈ§êÊàêÂäüÔºÅ',
          errorTitle: "ÈåØË™§ÔºÅ",
          enterName: "Ë´ãËº∏ÂÖ•ÊÇ®ÁöÑÂßìÂêç",
          selectDrink: "Ë´ãÈÅ∏ÊìáÈ£≤Êñô",
          quantityError: "Êï∏ÈáèÂøÖÈ†àÊòØÊï∏Â≠ó‰∏îÂ§ßÊñº 0",
          loadOrderError: "ËºâÂÖ•Ë®ÇÂñÆÊôÇÁôºÁîüÈåØË™§",
          loadSummaryError: "ËºâÂÖ•Áµ±Ë®àÊï∏ÊìöÊôÇÁôºÁîüÈåØË™§",
          exportError: "ÂåØÂá∫ Excel ÊôÇÁôºÁîüÈåØË™§",
          connectionError: "ÈÄ£Á∑öÈåØË™§",
          checkNameError: "Ê™¢Êü•ÈáçË§áÂêçÁ®±ÊôÇÂá∫ÈåØ",
          orderError: "ÁôºÁîüÈåØË™§",
          drinkOptions: ["ÁèçÁè†Â•∂Ëå∂", "ÈªëÂíñÂï°", "ÊãøÈêµ", "Êü≥Ê©ôÊ±Å", "ÁôΩÈñãÊ∞¥", "ËúúÊ°ÉËå∂", "ËçîÊûùËå∂", "ÂÜ∞Ê≤ô"]
        }
      };
      // H√†m chuy·ªÉn ƒë·ªïi ng√¥n ng·ªØ
      function changeLanguage(lang) {
        document.querySelectorAll('[data-translate]').forEach(element => {
          const key = element.dataset.translate;
          if (translations[lang] && translations[lang][key]) {
            if (key.includes('Placeholder')) {
              element.placeholder = translations[lang][key];
            } else if (element.tagName === 'OPTION') {
              element.textContent = translations[lang][key];
            } else {
              element.textContent = translations[lang][key];
            }
          }
        });
        // T·∫°o datalist ƒë·ªông
        const drinkOptions = document.getElementById('drinkOptions');
        drinkOptions.innerHTML = ''; // X√≥a c√°c option c≈©
        translations[lang].drinkOptions.forEach(option => {
          const optionElement = document.createElement('option');
          optionElement.value = option;
          drinkOptions.appendChild(optionElement);
        });
        // ƒê·∫∑t l·∫°i l·ªõp active cho c√°c n√∫t ng√¥n ng·ªØ
        document.querySelectorAll('.lang-button').forEach(button => {
          button.classList.remove('active');
        });
        document.querySelector(`.lang-button[data-lang="${lang}"]`).classList.add('active');
        // C·∫≠p nh·∫≠t ng√¥n ng·ªØ c·ªßa html (cho accessibility)
        document.documentElement.lang = lang;
      }
      // Event listener cho n√∫t chuy·ªÉn ng√¥n ng·ªØ
      document.querySelectorAll('.lang-button').forEach(button => {
        button.addEventListener('click', () => {
          const lang = button.dataset.lang;
          changeLanguage(lang);
        });
      });
      const foodSection = document.querySelector(".food-section");
      const foodSectionTitle = document.getElementById("foodSectionTitle");
      const foodToggleIcon = document.getElementById("foodToggleIcon");
      const foodInput = document.getElementById("food");
      const orderForm = document.getElementById("orderForm");
      let foodSectionActive = false;
      foodSectionTitle.addEventListener("click", () => {
        foodSectionActive = !foodSectionActive;
        foodSection.classList.toggle("inactive", !foodSectionActive);
        if (foodSectionActive) {
          foodInput.classList.remove("bg-gray-100");
          foodInput.classList.add("bg-white");
          foodInput.focus();
          foodToggleIcon.classList.remove("fa-chevron-down");
          foodToggleIcon.classList.add("fa-chevron-up");
          foodSectionTitle.classList.add("text-blue-600");
        } else {
          foodInput.classList.remove("bg-white");
          foodInput.classList.add("bg-gray-100");
          foodToggleIcon.classList.remove("fa-chevron-up");
          foodToggleIcon.classList.add("fa-chevron-down");
          foodSectionTitle.classList.remove("text-blue-600");
          foodInput.value = ""; // Clear food input
        }
      });
      //n√∫t extra
      const extraCheckbox = document.getElementById("extra");
      const extraText = document.getElementById("extraText");
      const extraIcon = document.getElementById("extraIcon");
      extraCheckbox.addEventListener('change', () => {
        if (extraCheckbox.checked) {
          extraText.classList.add("font-bold");
          extraIcon.classList.remove("fa-snowflake");
          extraIcon.classList.add("fa-check-circle");
          extraIcon.classList.replace("text-blue-400", "text-green-500")
        } else {
          extraText.classList.remove("font-bold");
          extraIcon.classList.replace("text-green-500", "text-blue-400")
          extraIcon.classList.remove("fa-check-circle");
          extraIcon.classList.add("fa-snowflake");
        }
      })
      async function loadOrders() {
        try {
          document.getElementById("loadingSpinner").classList.remove("hidden");
          const res = await fetch(API_URL);
          if (!res.ok) {
            throw new Error(`L·ªói: ${res.status} - ${await res.text()}`);
          }
          const orders = await res.json();
          const today = new Date().toISOString().split("T")[0];
          const todayOrders = orders[today] || [];
          document.getElementById("orderList").innerHTML = todayOrders.map(order => `
                    
												
																											<tr>
																												<td class="border p-2">${order.name}</td>
																												<td class="border p-2">${order.drink}</td>
																												<td class="border p-2">${order.food || "Kh√¥ng"}</td>
																												<td class="border p-2">${order.quantity}</td>
																												<td class="border p-2">${order.size}</td>
																												<td class="border p-2">${order.extra ? "‚úÖ" : "‚ùå"}</td>
																											</tr>
                `).join("");
        } catch (error) {
          //console.error("L·ªói khi t·∫£i ƒë∆°n h√†ng:", error);  // B·ªè console.error
          Swal.fire({
            icon: 'error',
            title: translations[document.documentElement.lang]['loadOrderError'], // D√πng translation
            text: error.message,
          });
        } finally {
          document.getElementById("loadingSpinner").classList.add("hidden");
        }
      }
      
	  async function loadSummary() {
  try {
    document.getElementById("loadingSpinner").classList.remove("hidden");

    const res = await fetch(API_URL);
    if (!res.ok) throw new Error(`L·ªói: ${res.status} - ${await res.text()}`);

    const data = await res.json();
    const today = data.serverDate;  // üîπ D√πng ng√†y t·ª´ server
    const todayOrders = data.orders[today] || [];

    const summary = {};
    todayOrders.forEach(order => {
      const drinkKey = order.drink + " (" + order.size + ")";
      summary[drinkKey] = (summary[drinkKey] || 0) + order.quantity;
      if (order.food) {
        const foodKey = order.food;
        summary[foodKey] = (summary[foodKey] || 0) + 1;
      }
    });

    document.getElementById("summaryList").innerHTML = Object.entries(summary)
      .map(([item, quantity]) => `<li>${item}: ${quantity}</li>`).join("");
  } catch (error) {
    Swal.fire({ icon: 'error', title: "L·ªói t·∫£i th·ªëng k√™", text: error.message });
  } finally {
    document.getElementById("loadingSpinner").classList.add("hidden");
  }
}


      function exportToExcel() {
        document.getElementById("loadingSpinner").classList.remove("hidden"); // Show
        try {
          // --- Ph·∫ßn l·∫•y d·ªØ li·ªáu v√† t·∫°o b·∫£ng chi ti·∫øt (nh∆∞ c≈©) ---
          let table = document.querySelector("table");
          let rows = [...table.rows].map(row => [...row.cells].map(cell => cell.innerText));
          const wb = XLSX.utils.book_new();
          const ws = XLSX.utils.aoa_to_sheet(rows);
          XLSX.utils.book_append_sheet(wb, ws, "Orders");
          // --- Th√™m ph·∫ßn t·∫°o b·∫£ng th·ªëng k√™ ---
          const summary = {};
          const todayOrders = rows.slice(1); // B·ªè header, l·∫•y c√°c d√≤ng c√≤n l·∫°i
          todayOrders.forEach(order => {
            const drinkKey = order[1] + " (" + order[4] + ")"; //  Th·ª©c u·ªëng (Size)
            summary[drinkKey] = (summary[drinkKey] || 0) + parseInt(order[3]); // C·ªông d·ªìn s·ªë l∆∞·ª£ng
            if (order[2] !== "Kh√¥ng") { // N·∫øu c√≥ m√≥n ƒÉn
              const foodKey = order[2];
              summary[foodKey] = (summary[foodKey] || 0) + 1; // C·ªông d·ªìn, m·ªói order t√≠nh l√† 1
            }
          });
          const summaryRows = Object.entries(summary).map(([item, quantity]) => [item, quantity]);
          summaryRows.unshift(["M√≥n", "S·ªë L∆∞·ª£ng"]); // Header cho b·∫£ng th·ªëng k√™
          const wsSummary = XLSX.utils.aoa_to_sheet(summaryRows);
          XLSX.utils.book_append_sheet(wb, wsSummary, "Summary"); // Sheet m·ªõi
          // --- Ph·∫ßn ghi file (nh∆∞ c≈©, nh∆∞ng d√πng wb ƒë√£ c√≥ 2 sheet) ---
          const wbout = XLSX.write(wb, {
            bookType: 'xlsx',
            type: 'binary'
          });

          function s2ab(s) {
            const buf = new ArrayBuffer(s.length);
            const view = new Uint8Array(buf);
            for (let i = 0; i < s.length; i++) view[i] = s.charCodeAt(i) & 0xFF;
            return buf;
          }
          const blob = new Blob([s2ab(wbout)], {
            type: 'application/octet-stream'
          });
          const href = URL.createObjectURL(blob);
          const link = document.createElement("a");
          link.href = href;
          link.download = "danh_sach_don_hang_" + new Date().toISOString().split("T")[0] + ".xlsx";
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          URL.revokeObjectURL(href);
        } catch (error) {
          //console.error("L·ªói khi xu·∫•t Excel:", error); // B·ªè console.error
          Swal.fire({
            icon: 'error',
            title: translations[document.documentElement.lang]['exportError'], // D√πng translation
            text: error.message,
          });
        } finally {
          document.getElementById("loadingSpinner").classList.add("hidden"); // Hide
        }
      }
      document.getElementById("orderForm").addEventListener("submit", async (event) => {
        event.preventDefault();
        const name = document.getElementById("name").value.trim();
        const drink = document.getElementById("drink").value.trim();
        const quantity = parseInt(document.getElementById("quantity").value, 10);
        const size = document.getElementById("size").value;
        const food = document.getElementById("food").value.trim();
        const extra = document.getElementById("extra").checked;
        const currentLang = document.documentElement.lang; // L·∫•y ng√¥n ng·ªØ hi·ªán t·∫°i
        if (!name) {
          Swal.fire({
            icon: 'error',
            title: translations[currentLang]['errorTitle'],
            text: translations[currentLang]['enterName'],
            confirmButtonText: 'OK'
          });
          document.getElementById("name").focus();
          return;
        }
        if (!drink) {
          Swal.fire({
            icon: 'error',
            title: translations[currentLang]['errorTitle'],
            text: translations[currentLang]['selectDrink'],
            confirmButtonText: 'OK'
          });
          document.getElementById("drink").focus();
          return;
        }
        if (isNaN(quantity) || quantity < 1) {
          Swal.fire({
            icon: 'error',
            title: translations[currentLang]['errorTitle'],
            text: translations[currentLang]['quantityError'],
            confirmButtonText: 'OK'
          });
          document.getElementById("quantity").focus();
          return;
        }
        const data = {
          name,
          drink,
          food,
          quantity,
          size,
          extra
        };
        try {
          document.getElementById("loadingSpinner").classList.remove("hidden");
          // Ki·ªÉm tra tr√πng t√™n
          const checkResponse = await fetch(API_URL);
          if (!checkResponse.ok) {
            throw new Error(`${translations[currentLang]['checkNameError']}: ${checkResponse.status} - ${await checkResponse.text()}`);
          }
          const existingOrders = await checkResponse.json();
          const today = new Date().toISOString().split("T")[0];
          const todayOrders = existingOrders[today] || [];
          const existingOrder = todayOrders.find(order => order.name.toLowerCase() === name.toLowerCase());
          if (existingOrder) {
            const confirmResult = await Swal.fire({
              icon: 'warning',
              title: translations[currentLang]['duplicateName'],
              text: translations[currentLang]['duplicateMessage'].replace('{name}', name), // Thay th·∫ø {name}
              showDenyButton: true,
              confirmButtonText: translations[currentLang]['confirmOverride'],
              denyButtonText: translations[currentLang]['denyOverride'],
              confirmButtonColor: '#3085d6',
              denyButtonColor: '#d33',
            });
            if (!confirmResult.isConfirmed) {
              document.getElementById("loadingSpinner").classList.add("hidden");
              return; // D·ª´ng n·∫øu kh√¥ng x√°c nh·∫≠n
            }
          }
          const response = await fetch(API_URL, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(data)
          });
          if (response.ok) {
            Swal.fire({
              icon: 'success',
              title: 'Th√†nh c√¥ng!',
              text: translations[currentLang]['orderSuccess'],
              confirmButtonText: 'OK'
            });
            loadOrders();
            loadSummary();
            document.getElementById("orderForm").reset();
            if (foodSectionActive) {
              foodSectionTitle.click();
            }
            window.scrollTo({
              top: 0,
              behavior: 'smooth'
            });
          } else {
            const errorData = await response.json();
            Swal.fire({
              icon: 'error',
              title: translations[currentLang]['orderError'],
              text: errorData.error
            });
          }
        } catch (error) {
          Swal.fire({
            icon: 'error',
            title: translations[currentLang]['connectionError'],
            text: error.message
          });
        } finally {
          document.getElementById("loadingSpinner").classList.add("hidden");
        }
      });
      document.getElementById("exportExcel").addEventListener("click", exportToExcel);

      function getTimeRemaining() {
        const now = new Date();
        const target = new Date();
        target.setHours(12, 0, 0, 0);
        if (now.getTime() > target.getTime()) {
          return {
            hours: "00",
            minutes: "00",
            seconds: "00",
            isPastDeadline: true
          };
        }
        const diff = target.getTime() - now.getTime();
        const hours = Math.floor(diff / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        return {
          hours: String(hours).padStart(2, '0'),
          minutes: String(minutes).padStart(2, '0'),
          seconds: String(seconds).padStart(2, '0'),
          isPastDeadline: false
        };
      }

      function updateCountdown() {
        const countdown = document.getElementById("countdown");
        const orderForm = document.getElementById("orderForm");
        const currentLang = document.documentElement.lang; // Get current language
        if (!countdown || !orderForm) {
          console.error("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ countdown ho·∫∑c orderForm!");
          return;
        }
        const remaining = getTimeRemaining();
        if (remaining.isPastDeadline) {
          const deadlineMessages = {
            vi: "ƒê√£ h·∫øt th·ªùi gian ƒë·∫∑t h√†ng!",
            "zh-TW": "Â∑≤Êà™Ê≠¢Ë®ÇÈ§êÔºÅ",
          };
          countdown.textContent = deadlineMessages[currentLang] || "ƒê√£ h·∫øt th·ªùi gian ƒë·∫∑t h√†ng!"; // Use object and default
          countdown.classList.add("text-red-600"); // Add red color for deadline
          orderForm.classList.add("hidden");
        } else {
          const timeLeft = `
												
																											<span class="text-red-600">${remaining.hours}:${remaining.minutes}:${remaining.seconds}</span>`;
          const countdownMessages = {
            vi: `Th·ªùi gian ch·ªët ƒë∆°n c√≤n l·∫°i: ${timeLeft}`,
            "zh-TW": `Ââ©È§òÊôÇÈñìÔºö${timeLeft}`,
          };
          // Use innerHTML to allow HTML tags (for the span)
          countdown.innerHTML = countdownMessages[currentLang] || `Th·ªùi gian c√≤n l·∫°i: ${timeLeft}`; //default to vietnamese
          orderForm.classList.remove("hidden");
        }
      }
      // Thi·∫øt l·∫≠p ng√¥n ng·ªØ m·∫∑c ƒë·ªãnh (v√≠ d·ª•: ti·∫øng Vi·ªát)
      changeLanguage('vi');
      setInterval(updateCountdown, 1000);
      loadOrders();
      loadSummary();
      updateCountdown();
    </script>
    <footer class="text-black text-center py-1 font-medium text-sm mx-auto"> &copy; 2024 Chingluh Group. All rights reserved. &bull; <a href="#" class="text-black font-bold transition-all duration-300 hover:text-blue-600 hover:underline underline-offset-4 decoration-2"> ITS Portal </a> &bull; Designed by IT Strategy Group </footer>
  </body>
</html>